import { useTranslation } from 'react-i18next'
import { useMediaQuery } from '@mui/material'
import React, { useState } from 'react'

const items = [
  {
    number: '01',
    text: 'Усиленный корпус пресс-гранулятора GM гарантирует максимальную устойчивость и стабильность даже в самых тяжелых условиях.',
  },
  {
    number: '02',
    text: 'Пневматический клапан от перегрузки и система безопасности в виде срезного болта обеспечивают безопасную работу пресс-гранулятора GM даже в случае непредвиденных событий.',
  },
  {
    number: '03',
    text: 'Клиноременный привод пресс-гранулятора GM не только прост в обслуживании, но и снижает эксплуатационные расходы, делая ваши инвестиции еще более выгодными.',
  },
  {
    number: '04',
    text: 'Ротор и главный вал пресс-гранулятора GM специально разработаны для материалов высокой плотности и могут выдерживать высокие нагрузки.',
  },
  {
    number: '05',
    text: 'Пресс-гранулятор GM, оснащенный двигателем по стандарту IE4, обеспечивает высокий уровень эффективности, экономит энергию и защищает окружающую среду.',
  },
];

function GMFeaturesSVG() {
  const [active, setActive] = useState(0);

  // Параметры для динамического расчета
  const topPadding = 100;
  const bottomPadding = 100;
  const itemGap = 25;
  const sectionHeight = 109;
  const sectionCount = items.length;
  const svgHeight = topPadding + sectionCount * sectionHeight + (sectionCount - 1) * itemGap + bottomPadding;

  const barX = 120;
  const barY = topPadding;
  const barHeight = svgHeight - topPadding - bottomPadding;
  const barWidth = 0.5;
  const numberX = barX - 100;
  const textX = barX + 2 + 17;
  const maxTextWidth = 650;

  const handleWheel = (e: React.WheelEvent<SVGSVGElement>) => {
    e.preventDefault();
    if (e.deltaY > 0 && active < items.length - 1) setActive(active + 1);
    else if (e.deltaY < 0 && active > 0) setActive(active - 1);
  };

  return (
    <svg
      viewBox={`0 0 800 ${svgHeight}`}
      className='w-[60%] tablet:w-[40%]'
      height="auto"
      style={{ display: 'block' }}
      onWheel={handleWheel}
    >
      {/* Вертикальный бар */}
      <rect x={barX} y={barY} width={barWidth} height={barHeight} rx={2} fill="#5B5B5B" />
      {/* Активная линия */}
      <rect
        x={barX}
        y={barY + active * (sectionHeight + itemGap)}
        width={2}
        height={sectionHeight}
        rx={2}
        fill="#82643F"
        style={{ transition: 'y 0.4s cubic-bezier(.4,0,.2,1)' }}
      />
      {items.map((item, i) => {
        const isActive = i === active;
        const y = topPadding + i * (sectionHeight + itemGap) + sectionHeight / 2;
        const color = isActive ? '#82643F' : '#BEB6A6';
        const fontSize = isActive ? 108 : 45;
        return (
          <g key={i} style={{ transition: 'all 0.4s cubic-bezier(.4,0,.2,1)' }}>
            <text
              x={numberX}
              y={y}
              fill={color}
              fontSize={fontSize}
              className='font-["Bebas_Neue"]'
              style={{ cursor: 'pointer', transition: 'all 0.4s cubic-bezier(.4,0,.2,1)' }}
              onClick={() => setActive(i)}
              alignmentBaseline="middle"
            >
              {item.number}
            </text>
            <foreignObject x={textX} y={y - sectionHeight / 2} width={maxTextWidth} height={sectionHeight}>
              <div
                style={{
                  fontSize: 25,
                  color: isActive ? '#D5CDBD' : '#5B5B5B',
                  lineHeight: '100%',
                  wordBreak: 'break-word',
                  whiteSpace: 'pre-line',
                  height: sectionHeight,
                  display: 'flex',
                  alignItems: 'center',
                }}
                className="font-adventpro"
              >
                {item.text}
              </div>
            </foreignObject>
          </g>
        );
      })}
    </svg>
  );
}

function Section1() {
  const { t } = useTranslation()
  const isLG = useMediaQuery('(min-width:768px)')
  return (
    <section className='flex flex-col tablet:flex-row justify-center mt-[15%] w-full px-[5%] max-w-[1920px] gap-[20px]'>
      <svg
        id='section1'
        className='w-[60%] tablet:w-[40%]'
        viewBox={`0 0 850 ${isLG ? '833' : '450'}`}
        fill='none'
        xmlns='http://www.w3.org/2000/svg'
        style={{position: isLG ? undefined : 'absolute'}}
      >
        <svg className='hidden tablet:block '>
          <g filter='url(#filter0_b_20_1296)'>
            <circle cx='122' cy='293' r='121' fill='#2E3032' />
            <foreignObject x="54" y="241" width="136" height="103">
          <svg
            width="136"
            height="103"
            viewBox="0 0 136 103"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M55.3133 52.9636L97.5287 102.232H72.1318C60.342 102.232 50.7495 92.5907 50.7495 80.7408V53.0485H2.15323C2.15323 53.0485 1.26582 49.9905 0.970014 49.0136C-3.55155 33.3411 8.6609 29.3487 18.4647 34.0207L50.4537 49.226L16.6898 0L35.9171 2.50589C46.566 3.90749 54.5527 12.9967 54.5527 23.8272V49.1835H103.36C108.811 63.964 97.4441 70.2075 87.0065 65.9178L55.3133 52.9636Z"
              fill="#343637"
            />
            <path
              d="M41.4881 63.9629L4.04788 101.594C2.56887 100.744 1.55469 99.1729 1.55469 97.3465V66.3414C1.55469 63.6231 3.70983 61.457 6.41431 61.457H37.2624C39.0372 61.457 40.643 62.4764 41.4881 63.9629Z"
              fill="#343637"
            />
            <path
              d="M42.1288 66.3863V97.3914C42.1288 100.067 39.9314 102.276 37.2692 102.276H6.42112C5.53371 102.276 4.73081 102.063 4.05469 101.639L41.4949 64.0078C41.8753 64.6874 42.1288 65.4944 42.1288 66.3863Z"
              fill="#2D2D2D"
            />
            <path
              d="M130.822 0.0429688H78.1268H77.9578C75.6759 0.21286 73.5207 0.934901 71.9149 2.54887L68.154 6.32894C68.154 6.32894 68.154 6.32895 68.154 6.37142L64.4353 10.109C63.4634 11.0859 62.9141 12.4026 62.9141 13.8042V35.975C62.9141 37.8013 63.9283 39.4152 65.4073 40.2222L82.8597 22.3837C84.0851 21.1519 85.7332 20.4724 87.4657 20.4724H135.639V4.96982C135.682 2.20908 133.484 0.0429688 130.822 0.0429688Z"
              fill="#343637"
            />
            <path
              d="M87.5038 20.4292C85.7712 20.4292 84.1232 21.1088 82.8977 22.3405L65.4453 40.179C66.1214 40.5613 66.9243 40.7737 67.7695 40.7737H130.818C133.48 40.7737 135.677 38.6075 135.677 35.8893V20.3867H87.5038V20.4292Z"
              fill="#2D2D2D"
            />
          </svg>
            </foreignObject>
          </g>
          <path d='M242 293L242 631' stroke='#3F4042' strokeWidth='0.5' />
          <path
            d='M242.53 609.53C242.823 609.237 242.823 608.763 242.53 608.47L237.757 603.697C237.464 603.404 236.99 603.404 236.697 603.697C236.404 603.99 236.404 604.464 236.697 604.757L240.939 609L236.697 613.243C236.404 613.536 236.404 614.01 236.697 614.303C236.99 614.596 237.464 614.596 237.757 614.303L242.53 609.53ZM0.469666 608.47C0.176773 608.763 0.176773 609.237 0.469666 609.53L5.24265 614.303C5.53554 614.596 6.01041 614.596 6.3033 614.303C6.59619 614.01 6.59619 613.536 6.3033 613.243L2.06067 609L6.3033 604.757C6.59619 604.464 6.59619 603.99 6.3033 603.697C6.01041 603.404 5.53554 603.404 5.24265 603.697L0.469666 608.47ZM242 608.25H240.494V609.75H242V608.25ZM237.481 608.25H234.469V609.75H237.481V608.25ZM231.456 608.25H228.444V609.75H231.456V608.25ZM225.431 608.25H222.419V609.75H225.431V608.25ZM219.406 608.25H216.394V609.75H219.406V608.25ZM213.381 608.25H210.369V609.75H213.381V608.25ZM207.356 608.25H204.344V609.75H207.356V608.25ZM201.331 608.25H198.319V609.75H201.331V608.25ZM195.306 608.25H192.294V609.75H195.306V608.25ZM189.281 608.25H186.269V609.75H189.281V608.25ZM183.256 608.25H180.244V609.75H183.256V608.25ZM177.231 608.25H174.219V609.75H177.231V608.25ZM171.206 608.25H168.194V609.75H171.206V608.25ZM165.181 608.25H162.169V609.75H165.181V608.25ZM159.156 608.25H156.144V609.75H159.156V608.25ZM153.131 608.25H150.119V609.75H153.131V608.25ZM147.106 608.25H144.094V609.75H147.106V608.25ZM141.081 608.25H138.069V609.75H141.081V608.25ZM135.056 608.25H132.044V609.75H135.056V608.25ZM129.031 608.25H126.019V609.75H129.031V608.25ZM123.006 608.25H119.994V609.75H123.006V608.25ZM116.981 608.25H113.969V609.75H116.981V608.25ZM110.956 608.25H107.944V609.75H110.956V608.25ZM104.931 608.25H101.919V609.75H104.931V608.25ZM98.9063 608.25H95.8938V609.75H98.9063V608.25ZM92.8813 608.25H89.8688V609.75H92.8813V608.25ZM86.8563 608.25H83.8438V609.75H86.8563V608.25ZM80.8313 608.25H77.8188V609.75H80.8313V608.25ZM74.8063 608.25H71.7938V609.75H74.8063V608.25ZM68.7813 608.25H65.7688V609.75H68.7813V608.25ZM62.7563 608.25H59.7439V609.75H62.7563V608.25ZM56.7314 608.25H53.7189V609.75H56.7314V608.25ZM50.7064 608.25H47.6939V609.75H50.7064V608.25ZM44.6814 608.25H41.6689V609.75H44.6814V608.25ZM38.6564 608.25H35.6439V609.75H38.6564V608.25ZM32.6314 608.25H29.6189V609.75H32.6314V608.25ZM26.6064 608.25H23.5939V609.75H26.6064V608.25ZM20.5814 608.25H17.5689V609.75H20.5814V608.25ZM14.5564 608.25H11.5439V609.75H14.5564V608.25ZM8.53142 608.25H5.51892V609.75H8.53142V608.25ZM2.50642 608.25H1V609.75H2.50642V608.25Z'
            fill='#3F4042'
          />
          <path d='M0.999985 297L1 633' stroke='#3F4042' strokeWidth='0.5' />

          <foreignObject className='text-center' x='7' y='580' width='230' height='25'>
            <span className='w-full font-["Bebas_Neue"] text-[#3F4042] text-[18px] whitespace-normal uppercase tracking-[.2em]'>
              {t('diagrams.dieMatrix.highHardness.descriptionBg')}
            </span>
          </foreignObject>
        </svg>

        <path id='my_path' d='M 20,20 C 40,40 80,40 100,20' />

        <svg className='tablet:hidden' x='0' y='0'>
          <g filter='url(#filter0_b_134_1508)'>
            <ellipse cx='106.937' cy='275' rx='106.937' ry='121' fill='#1E1F20' />
          </g>
          <path
            d='M82.6259 288.121L49.4643 325.374C48.1543 324.533 47.256 322.977 47.256 321.169V290.476C47.256 287.785 49.1648 285.641 51.5603 285.641H78.883C80.4925 285.641 81.8773 286.65 82.6259 288.121Z'
            fill='#212324'
          />
          <path
            d='M83.1872 290.476V321.169C83.1872 323.818 81.2409 326.004 78.883 326.004H51.5602C50.7742 326.004 50.063 325.794 49.4642 325.374L82.6258 288.121C82.9627 288.794 83.1872 289.593 83.1872 290.476Z'
            fill='#212324'
          />
          <path
            d='M164.594 319.192C156.098 333.235 123.311 324.784 91.3467 300.397C59.3828 275.926 40.3692 244.77 48.8654 230.727C55.378 220.005 77.0116 222.318 101.752 236.109L94.2662 244.182C87.529 242.121 82.1019 243.425 80.1182 246.662C77.1239 251.624 80.7545 260.664 88.6145 269.956C90.149 271.764 91.8707 273.614 93.7047 275.38L94.2287 275.884C95.3516 276.978 96.5493 278.071 97.747 279.08C98.3833 279.626 99.0196 280.173 99.6559 280.678C99.9179 280.888 100.142 281.098 100.404 281.266C100.666 281.476 100.928 281.687 101.19 281.897C101.452 282.107 101.752 282.359 102.014 282.57C102.388 282.864 102.8 283.158 103.174 283.453C104.858 284.714 106.543 285.891 108.227 286.942C109.537 287.783 110.81 288.54 112.082 289.255L112.307 289.381C113.841 290.222 115.376 291.021 116.873 291.694C127.652 296.739 136.785 297.286 139.817 292.24C142.362 288.036 140.116 280.888 134.614 273.109H147.34C163.135 291.483 170.471 309.479 164.594 319.192Z'
            fill='#212324'
          />
          <path
            d='M166.054 229.635V244.982H121.028L98.9447 269.789C97.3353 268.233 95.8756 266.72 94.603 265.248C89.9993 259.992 87.5291 255.451 86.6682 252.76L109.013 227.617C110.622 225.809 112.831 224.758 115.114 224.758H161.787C164.145 224.8 166.054 226.986 166.054 229.635Z'
            fill='#212324'
          />
          <path
            d='M166.054 244.98V260.327C166.054 263.018 164.108 265.162 161.75 265.162H132.256C131.096 265.162 130.01 265.667 129.187 266.592L115.413 282.149C112.494 280.509 109.387 278.491 106.131 275.968C105.158 275.211 104.222 274.497 103.324 273.74C101.714 272.436 100.255 271.133 98.9073 269.83L120.99 245.023H166.054V244.98Z'
            fill='#212324'
          />
          <path d='M121.961 155L420.678 155' stroke='#2C2D2F' strokeWidth='0.5' />
          <path
            d='M401.765 154.47C401.472 154.177 400.997 154.177 400.705 154.47L395.932 159.243C395.639 159.536 395.639 160.01 395.932 160.303C396.224 160.596 396.699 160.596 396.992 160.303L401.235 156.061L405.478 160.303C405.77 160.596 406.245 160.596 406.538 160.303C406.831 160.01 406.831 159.536 406.538 159.243L401.765 154.47ZM400.705 396.53C400.997 396.823 401.472 396.823 401.765 396.53L406.538 391.757C406.831 391.464 406.831 390.99 406.538 390.697C406.245 390.404 405.77 390.404 405.478 390.697L401.235 394.939L396.992 390.697C396.699 390.404 396.224 390.404 395.932 390.697C395.639 390.99 395.639 391.464 395.932 391.757L400.705 396.53ZM400.485 155L400.485 156.506L401.985 156.506L401.985 155L400.485 155ZM400.485 159.519L400.485 162.531L401.985 162.531L401.985 159.519L400.485 159.519ZM400.485 165.544L400.485 168.556L401.985 168.556L401.985 165.544L400.485 165.544ZM400.485 171.569L400.485 174.581L401.985 174.581L401.985 171.569L400.485 171.569ZM400.485 177.594L400.485 180.606L401.985 180.606L401.985 177.594L400.485 177.594ZM400.485 183.619L400.485 186.631L401.985 186.631L401.985 183.619L400.485 183.619ZM400.485 189.644L400.485 192.656L401.985 192.656L401.985 189.644L400.485 189.644ZM400.485 195.669L400.485 198.681L401.985 198.681L401.985 195.669L400.485 195.669ZM400.485 201.694L400.485 204.706L401.985 204.706L401.985 201.694L400.485 201.694ZM400.485 207.719L400.485 210.731L401.985 210.731L401.985 207.719L400.485 207.719ZM400.485 213.744L400.485 216.756L401.985 216.756L401.985 213.744L400.485 213.744ZM400.485 219.769L400.485 222.781L401.985 222.781L401.985 219.769L400.485 219.769ZM400.485 225.794L400.485 228.806L401.985 228.806L401.985 225.794L400.485 225.794ZM400.485 231.819L400.485 234.831L401.985 234.831L401.985 231.819L400.485 231.819ZM400.485 237.844L400.485 240.856L401.985 240.856L401.985 237.844L400.485 237.844ZM400.485 243.869L400.485 246.881L401.985 246.881L401.985 243.869L400.485 243.869ZM400.485 249.894L400.485 252.906L401.985 252.906L401.985 249.894L400.485 249.894ZM400.485 255.919L400.485 258.931L401.985 258.931L401.985 255.919L400.485 255.919ZM400.485 261.944L400.485 264.956L401.985 264.956L401.985 261.944L400.485 261.944ZM400.485 267.969L400.485 270.981L401.985 270.981L401.985 267.969L400.485 267.969ZM400.485 273.994L400.485 277.006L401.985 277.006L401.985 273.994L400.485 273.994ZM400.485 280.019L400.485 283.031L401.985 283.031L401.985 280.019L400.485 280.019ZM400.485 286.044L400.485 289.056L401.985 289.056L401.985 286.044L400.485 286.044ZM400.485 292.069L400.485 295.081L401.985 295.081L401.985 292.069L400.485 292.069ZM400.485 298.094L400.485 301.106L401.985 301.106L401.985 298.094L400.485 298.094ZM400.485 304.119L400.485 307.131L401.985 307.131L401.985 304.119L400.485 304.119ZM400.485 310.144L400.485 313.156L401.985 313.156L401.985 310.144L400.485 310.144ZM400.485 316.169L400.485 319.181L401.985 319.181L401.985 316.169L400.485 316.169ZM400.485 322.194L400.485 325.206L401.985 325.206L401.985 322.194L400.485 322.194ZM400.485 328.219L400.485 331.231L401.985 331.231L401.985 328.219L400.485 328.219ZM400.485 334.244L400.485 337.256L401.985 337.256L401.985 334.244L400.485 334.244ZM400.485 340.269L400.485 343.281L401.985 343.281L401.985 340.269L400.485 340.269ZM400.485 346.294L400.485 349.306L401.985 349.306L401.985 346.294L400.485 346.294ZM400.485 352.319L400.485 355.331L401.985 355.331L401.985 352.319L400.485 352.319ZM400.485 358.344L400.485 361.356L401.985 361.356L401.985 358.344L400.485 358.344ZM400.485 364.369L400.485 367.381L401.985 367.381L401.985 364.369L400.485 364.369ZM400.485 370.394L400.485 373.406L401.985 373.406L401.985 370.394L400.485 370.394ZM400.485 376.419L400.485 379.431L401.985 379.431L401.985 376.419L400.485 376.419ZM400.485 382.444L400.485 385.456L401.985 385.456L401.985 382.444L400.485 382.444ZM400.485 388.469L400.485 391.481L401.985 391.481L401.985 388.469L400.485 388.469ZM400.485 394.494L400.485 396L401.985 396L401.985 394.494L400.485 394.494Z'
            fill='#2C2D2F'
          />
          <path d='M125.496 396L422.446 396' stroke='#2C2D2F' strokeWidth='0.5' />
          <foreignObject className='-rotate-90 text-center' x='-390' y='370' width='230' height='25'>
            <span className='font-bebas text-grey_svg text-[18px] whitespace-normal uppercase tracking-[.2em]'>
              {t('diagrams.dieMatrix.highHardness.descriptionBg')}
            </span>
          </foreignObject>
        </svg>

        <text className='font-["Bebas_Neue"] fill-[#D5CDBD] text-[90px] whitespace-normal uppercase translate-x-[35px] translate-y-[93px]'>
          {t('diagrams.dieMatrix.highHardness.title.first')}
        </text>
        <text className='font-["Bebas_Neue"] fill-[#D5CDBD] text-[90px] whitespace-normal uppercase translate-x-[35px] translate-y-[183px]'>
          {t('diagrams.dieMatrix.highHardness.title.second')}
        </text>
        <text className='font-adventpro fill-navSelect text-[29px] uppercase translate-x-[35px] translate-y-[230px]'>
          {t('diagrams.dieMatrix.highHardness.description')}
        </text>

        <path className='section1stroke' d='M15 30L15 93' stroke='#82643F' strokeWidth='24' />
        <path className='section1stroke' d='M15 120L15 183' stroke='#82643F' strokeWidth='24' />


        {/* <defs>
          <filter
            id='filter0_b_20_1296'
            x='-18'
            y='153'
            width='280'
            height='280'
            filterUnits='userSpaceOnUse'
            colorInterpolationFilters='sRGB'
          >
            <feFlood floodOpacity='0' result='BackgroundImageFix' />
            <feGaussianBlur in='BackgroundImageFix' stdDeviation='9.5' />
            <feComposite in2='SourceAlpha' operator='in' result='effect1_backgroundBlur_20_1296' />
            <feBlend mode='normal' in='SourceGraphic' in2='effect1_backgroundBlur_20_1296' result='shape' />
          </filter>
        </defs> */}
      </svg>

      {/* Интерактивный SVG-блок с характеристиками */}
      <GMFeaturesSVG />
    </section>
  )
}

export default Section1
